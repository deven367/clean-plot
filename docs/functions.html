---

title: Functions


keywords: fastai
sidebar: home_sidebar

summary: "This includes majority of the functions"
description: "This includes majority of the functions"
nb_path: "03_functions.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 03_functions.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>[nltk_data] Downloading package punkt to /home/deven367/nltk_data...
[nltk_data]   Package punkt is already up-to-date!
[nltk_data] Downloading package stopwords to
[nltk_data]     /home/deven367/nltk_data...
[nltk_data]   Package stopwords is already up-to-date!
[nltk_data] Downloading package averaged_perceptron_tagger to
[nltk_data]     /home/deven367/nltk_data...
[nltk_data]   Package averaged_perceptron_tagger is already up-to-
[nltk_data]       date!
[nltk_data] Downloading package wordnet to /home/deven367/nltk_data...
[nltk_data]   Package wordnet is already up-to-date!
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stderr output_text">
<pre>[nltk_data] Downloading package punkt to /home/deven367/nltk_data...
[nltk_data]   Unzipping tokenizers/punkt.zip.
[nltk_data] Downloading package stopwords to
[nltk_data]     /home/deven367/nltk_data...
[nltk_data]   Unzipping corpora/stopwords.zip.
[nltk_data] Downloading package averaged_perceptron_tagger to
[nltk_data]     /home/deven367/nltk_data...
[nltk_data]   Unzipping taggers/averaged_perceptron_tagger.zip.
[nltk_data] Downloading package wordnet to /home/deven367/nltk_data...
[nltk_data]   Unzipping corpora/wordnet.zip.
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Methods">Methods<a class="anchor-link" href="#Methods"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="normalize" class="doc_header"><code>normalize</code><a href="https://github.com/deven367/clean_plot/tree/master/clean_plot/functions.py#L33" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>normalize</code>(<strong><code>data</code></strong>)</p>
</blockquote>
<p>The function takes an array, matrix as input and normalizes
it between 0 and 1</p>
<p>Args:
    data (ndarray): any 1-D, or 2-D numpy array</p>
<p>Returns:
    (ndarray): normalized ndarray</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">normalize</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([0.  , 0.25, 0.5 , 0.75, 1.  ])</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="split_by_newline" class="doc_header"><code>split_by_newline</code><a href="https://github.com/deven367/clean_plot/tree/master/clean_plot/functions.py#L47" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>split_by_newline</code>(<strong><code>all</code></strong>)</p>
</blockquote>
<p>Only use when sentences are already tokenized
returns sentences split by '\n' if len(line) &gt; 0</p>
<p>Args:
    all (str): tokenized string to be split by '\n'</p>
<p>Returns:
    list: list of sentences split by '\n'</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">all</span> <span class="o">=</span> <span class="s2">&quot;Hello there!</span><span class="se">\n</span><span class="s2">This is how this functions works!&quot;</span>
<span class="n">split_by_newline</span><span class="p">(</span><span class="nb">all</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;hello there!&#39;, &#39;this is how this functions works!&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="rm_useless_spaces" class="doc_header"><code>rm_useless_spaces</code><a href="https://github.com/deven367/clean_plot/tree/master/clean_plot/functions.py#L61" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>rm_useless_spaces</code>(<strong><code>t</code></strong>)</p>
</blockquote>
<p>Remove multiple spaces</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rm_useless_spaces</span><span class="p">(</span><span class="s1">&#39;This is      test sentence.  This removes  all the extra  spaces .&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#39;This is test sentence. This removes all the extra spaces .&#39;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="make_sentences" class="doc_header"><code>make_sentences</code><a href="https://github.com/deven367/clean_plot/tree/master/clean_plot/functions.py#L67" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>make_sentences</code>(<strong><code>all</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="write_to_file_cleaned" class="doc_header"><code>write_to_file_cleaned</code><a href="https://github.com/deven367/clean_plot/tree/master/clean_plot/functions.py#L76" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>write_to_file_cleaned</code>(<strong><code>sentences</code></strong>, <strong><code>fname</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="clean" class="doc_header"><code>clean</code><a href="https://github.com/deven367/clean_plot/tree/master/clean_plot/functions.py#L83" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>clean</code>(<strong><code>fname</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>All functions mentioned above are merged into a single function called clean. 
You only need to give it the name of the .txt file that you want to clean and call the function</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">fname</span> <span class="o">=</span> <span class="s1">&#39;dummy.txt&#39;</span>
<span class="n">get_data</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&#34;MARLEY was dead: to begin with. There is no doubt\nwhatever about that. The register of his burial was\nsigned by the clergyman, the clerk, the undertaker,\nand the chief mourner. Scrooge signed it: and\nScrooge&#39;s name was good upon &#39;Change, for anything he\nchose to put his hand to. Old Marley was as dead as a\ndoor-nail.\n\nMind! I don&#39;t mean to say that I know, of my\nown knowledge, what there is particularly dead about\na door-nail. I might have been inclined, myself, to\nregard a coffin-nail as the deadest piece of ironmongery\nin the trade. But the wisdom of our ancestors\nis in the simile; and my unhallowed hands\nshall not disturb it, or the Country&#39;s done for. You\nwill therefore permit me to repeat, emphatically, that\nMarley was as dead as a door-nail.&#34;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>It goes from this to</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">make_sentences</span><span class="p">(</span><span class="n">get_data</span><span class="p">(</span><span class="n">fname</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;MARLEY was dead: to begin with.&#39;,
 &#39;There is no doubt whatever about that.&#39;,
 &#39;The register of his burial was signed by the clergyman, the clerk, the undertaker, and the chief mourner.&#39;,
 &#34;Scrooge signed it: and Scrooge&#39;s name was good upon &#39;Change, for anything he chose to put his hand to.&#34;,
 &#39;Old Marley was as dead as a door-nail.&#39;,
 &#39;Mind!&#39;,
 &#34;I don&#39;t mean to say that I know, of my own knowledge, what there is particularly dead about a door-nail.&#34;,
 &#39;I might have been inclined, myself, to regard a coffin-nail as the deadest piece of ironmongery in the trade.&#39;,
 &#34;But the wisdom of our ancestors is in the simile; and my unhallowed hands shall not disturb it, or the Country&#39;s done for.&#34;,
 &#39;You will therefore permit me to repeat, emphatically, that Marley was as dead as a door-nail.&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The <a href="/clean_plot/functions.html#clean"><code>clean</code></a> function writes these sentences into a txt file with the name <code>&lt;fname&gt;_cleaned.txt</code></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Let's-move-on-to-further-cleaning">Let's move on to further cleaning<a class="anchor-link" href="#Let's-move-on-to-further-cleaning"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let us first create a set of STOPWORDS which we can use</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_wordnet_pos" class="doc_header"><code>get_wordnet_pos</code><a href="https://github.com/deven367/clean_plot/tree/master/clean_plot/functions.py#L90" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_wordnet_pos</code>(<strong><code>word</code></strong>)</p>
</blockquote>
<p>Map POS tag to first character lemmatize() accepts</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_stopwords" class="doc_header"><code>remove_stopwords</code><a href="https://github.com/deven367/clean_plot/tree/master/clean_plot/functions.py#L101" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_stopwords</code>(<strong><code>sentence</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_punctuations" class="doc_header"><code>remove_punctuations</code><a href="https://github.com/deven367/clean_plot/tree/master/clean_plot/functions.py#L109" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_punctuations</code>(<strong><code>sentence</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="remove_punc_clean" class="doc_header"><code>remove_punc_clean</code><a href="https://github.com/deven367/clean_plot/tree/master/clean_plot/functions.py#L119" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>remove_punc_clean</code>(<strong><code>sentence</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="process" class="doc_header"><code>process</code><a href="https://github.com/deven367/clean_plot/tree/master/clean_plot/functions.py#L129" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>process</code>(<strong><code>fname</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's continue the same example from above</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">get_data</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="n">sentences</span> <span class="o">=</span> <span class="n">make_sentences</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">sentences</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;MARLEY was dead: to begin with.&#39;,
 &#39;There is no doubt whatever about that.&#39;,
 &#39;The register of his burial was signed by the clergyman, the clerk, the undertaker, and the chief mourner.&#39;,
 &#34;Scrooge signed it: and Scrooge&#39;s name was good upon &#39;Change, for anything he chose to put his hand to.&#34;,
 &#39;Old Marley was as dead as a door-nail.&#39;,
 &#39;Mind!&#39;,
 &#34;I don&#39;t mean to say that I know, of my own knowledge, what there is particularly dead about a door-nail.&#34;,
 &#39;I might have been inclined, myself, to regard a coffin-nail as the deadest piece of ironmongery in the trade.&#39;,
 &#34;But the wisdom of our ancestors is in the simile; and my unhallowed hands shall not disturb it, or the Country&#39;s done for.&#34;,
 &#39;You will therefore permit me to repeat, emphatically, that Marley was as dead as a door-nail.&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Here, the <a href="/clean_plot/functions.html#remove_punc_clean"><code>remove_punc_clean</code></a> function removes punctuations, STOPWORDS and lemmatizes the word and returns the cleaned sentence.</p>
<p><strong>NOTE</strong> It is possible that a sentence gets removed completely as it may contain only STOPWORDS. 
This method is to be used for methods involving lexical analysis.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">remove_punc_clean</span><span class="p">(</span><span class="n">sentence</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>MARLEY dead begin
doubt whatever
register burial sign clergyman clerk undertaker chief mourner
Scrooge sign Scrooge name good upon Change anything chose put hand
Old Marley dead door nail
Mind
mean say know knowledge particularly dead door nail
might inclined regard coffin nail deadest piece ironmongery trade
wisdom ancestor simile unhallowed hand shall disturb Country do
therefore permit repeat emphatically Marley dead door nail
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

